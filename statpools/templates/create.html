{% extends 'base.html' %}

{% block title %}{% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<link href="/static/css/team-dropdown.css" rel="stylesheet">
<link href="/static/css/create-styles.css" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=delete" />
<script src="https://unpkg.com/htmx.org@1.9.12" integrity="sha384-ujb1lZYygJmzgSwoxRggbCHcjc0rB2XoQrxeTUQyRjrOnlCoYta87iKBWq3EsdM2" crossorigin="anonymous"></script>
{% endblock stylesheets %}
<script src="/static/js/create-stat-pool.js"></script>

{% block content %}
<div id="popupModal">
</div>

<div style="padding: 25px;">
  <div class="header-container">
    <div class="title">
      <b>NEW STAT POOLS</b>
    </div>
  </div>
  <div style="display: flex;">
    <div class="categories-container">
        <div class="categories-header">
          <span style="font-size: 20pt;"><b>Categories</b></span>
          <div class="new-btn finish"
              hx-get="{% url 'statpoolsaddcategory' %}" 
              hx-target="#popupModal" 
              hx-include="[name*='JSON']">NEW
          </div>
          {% if categories %}
          <div class="new-btn"
              hx-get="{% url 'statpoolscreatestatpool' %}" 
              hx-target="#popupModal" 
              hx-include="">FINISH
          </div>
          {% endif %}
        </div>
        <div class="card-body">
          <table class="table">
            <thead>
                <tr>
                    <th class="text-center">#</th>
                    <th>Player</th>
                    <th>Stat</th>
                    <th>Game</th>
                    <th></th>
                </tr>
              </thead>
              <tbody>
                {% for cat in categories %}
                <tr>
                    <td class="text-center">{{forloop.counter}}</td>
                    <td>{{cat.player.name}}</td>
                    <td>{{cat.stat.desc}}</td>
                    <td style="display: flex;">
                      <img src="{{cat.game.hlogo}}" height="25" width="25" style="padding: 0 2px 0 2px;"/>{{cat.game.home}} @
                      <img src="{{cat.game.alogo}}" height="25" width="25" style="padding: 0 2px 0 2px;"/>{{cat.game.away}}
                    </td>
                    <td class="text-right">
                      <form method="POST">
                        {% csrf_token %}
                        <button name="remove" type="submit" value="{{forloop.counter0}}" class="delete-btn">
                            <i class="material-symbols-outlined">delete</i>
                        </button>
                      </form>
                    </td>
                </tr>
                {% empty %}
                  <tr><td class="text-center" colspan="5"> Click 'NEW' to create categories </td></tr>
                {% endfor %}
              </tbody>
          </table>
        </div>
    </div>
  </div>
</div>
{% endblock content %}




